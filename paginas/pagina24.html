<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P치gina 24</title>

    <!-- Estilos -->
    <link rel="stylesheet" href="../css/estilos.css">

    <!-- Librerias -->
    <script src="../js/librerias/jquery.min.js"></script>
    <script src="../js/librerias/gsap.min.js"></script>
    <script src="../js/librerias/jquery-ui.min.js"></script>
    <script src="../js/librerias/jquery.ui.touch-punch.min.js"></script>

    <!-- Script de animaciones -->
    <script src="../js/animaciones.js"></script>

    <!-- Scripts posicionar elementos -->
    <script src="../js/redimensionarElementos.js"></script>
    <script src="../js/posicionar.js"></script>

</head>
<body class="pagina">
    
    <img class="elementos" id="fondo" src="../img/pagina24/fondo.png" data-posX="0" data-posY="0">
    
    <!-- Pregunta 1 -->
    <img class="elementos" id="p1" src="../img/pagina24/p1.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos respuestas rV" id="r1_v" src="../img/pagina24/verdadero.png" data-posX="195" data-posY="296" data-respuesta="b" alt="">
    <img class="elementos respuestas rF" id="r1_f" src="../img/pagina24/falso.png" data-posX="455" data-posY="296" data-respuesta="m" alt="">

    <!-- Pregunta 2 -->
    <img class="elementos" id="p2" src="../img/pagina24/p2.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos respuestas rV" id="r2_v" src="../img/pagina24/verdadero.png" data-posX="195" data-posY="296" data-respuesta="m" alt="">
    <img class="elementos respuestas rF" id="r2_f" src="../img/pagina24/falso.png" data-posX="455" data-posY="296" data-respuesta="b" alt="">

    <!-- Pregunta 3 -->
    <img class="elementos" id="p3" src="../img/pagina24/p3.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos respuestas rV" id="r3_v" src="../img/pagina24/verdadero.png" data-posX="195" data-posY="296" data-respuesta="b" alt="">
    <img class="elementos respuestas rF" id="r3_f" src="../img/pagina24/falso.png" data-posX="455" data-posY="296" data-respuesta="m" alt="">

    <!-- Pregunta 4 -->
    <img class="elementos" id="p4" src="../img/pagina24/p4.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos respuestas rV" id="r4_v" src="../img/pagina24/verdadero.png" data-posX="195" data-posY="296" data-respuesta="b" alt="">
    <img class="elementos respuestas rF" id="r4_f" src="../img/pagina24/falso.png" data-posX="455" data-posY="296" data-respuesta="m" alt="">

    <!-- Pregunta 5 -->
    <img class="elementos" id="p5" src="../img/pagina24/p5.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos respuestas rV" id="r5_v" src="../img/pagina24/verdadero.png" data-posX="195" data-posY="296" data-respuesta="m" alt="">
    <img class="elementos respuestas rF" id="r5_f" src="../img/pagina24/falso.png" data-posX="455" data-posY="296" data-respuesta="b" alt="">
    
    <img class="elementos" id="retroBuena" src="../img/pagina24/retroBuena.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="retroMala" src="../img/pagina24/retroMala.png" data-posX="0" data-posY="0" alt="">

    <!-- RetroAlimentaci칩n -->
    <img class="elementos" id="retroFinal" src="../img/pagina24/retroFinal.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="continuar" src="../img/pagina24/continuar.png" data-posX="392" data-posY="419"/>  
    
    
    <!-- Script de la p치gina -->
    <script>

        // Variable----------------------------------------------------
        let aplicacion = parent;

        const fondo = $('#fondo');
        const continuar = $('#continuar');

        const retroBuena = $('#retroBuena');
        const retroMala = $('#retroMala');
        const respuestas = $('.respuestas');
        const retroFinal = $('#retroFinal');

        const p1 = $('#p1');
        const r1_v = $('#r1_v');
        const r1_f = $('#r1_f');
        
        const p2 = $('#p2');
        const r2_v = $('#r2_v');
        const r2_f = $('#r2_f');

        const p3 = $('#p3');
        const r3_v = $('#r3_v');
        const r3_f = $('#r3_f');

        const p4 = $('#p4');
        const r4_v = $('#r4_v');
        const r4_f = $('#r4_f');

        const p5 = $('#p5');
        const r5_v = $('#r5_v');
        const r5_f = $('#r5_f');

        respuestas.css('cursor', 'pointer');
        let indexPregunta = 0;

        const preguntas = [p1, p2, p3, p4, p5];

        const respuestasV = [r1_v, r2_v, r3_v, r4_v, r5_v];
        const respuestasF = [r1_f, r2_f, r3_f, r4_f, r5_f];

        const rV = $('.rV');
        const rF = $('.rF');
   
        // Audios------------------------------------------------------
        const audio = [
            new Audio('../audios/Pfizer_Documentacion_24_01.mp3')
        ]

        const audioRetro = [
            new Audio('../audios/s_bien.mp3'),
            new Audio('../audios/s_mal.mp3'),
        ]

        // Al cargarse la p치gina
        $(window).on("load", function(){
            redimensionarElementos();
            aplicacion.cargando(iniciarContenido);
        });

        function iniciarContenido(){
            animacionEntrada(fondo, 'default', 1);
            entradaPreguntas();
        }


        function entradaPreguntas() {  
            animacionEntrada(preguntas[indexPregunta], 'default', 1, 1);
            animacionEntrada(respuestasV[indexPregunta], 'derecha-izquierda', 1, 1.5);
            animacionEntrada(respuestasF[indexPregunta], 'derecha-izquierda', 1, 2);
        }

        rV.each(function(){
            $(this).click(function () {  
                if($(this).css('cursor') == 'pointer'){
                    const respuesta = $(this).data('respuesta');
                
                    if(respuesta == 'b'){
                        audioRetro[0].play();
                        animacionEntrada(retroBuena, 'default', 1);

                        setTimeout(()=>{
                            salidaPreguntas();
                        }, 1000);
                    }
                    else{
                        audioRetro[1].play();
                        animacionEntrada(retroMala, 'default', 1);

                        setTimeout(() => {
                            animacionSalida(retroMala, 'default', 1);
                        }, 1000);
                    }
                }
            });
        });

        rF.each(function(){
            $(this).click(function () {  
                if($(this).css('cursor') == 'pointer'){
                    const respuesta = $(this).data('respuesta');
                
                    if(respuesta == 'b'){
                        audioRetro[0].play();
                        animacionEntrada(retroBuena, 'default', 1);

                        setTimeout(()=>{
                            salidaPreguntas();
                        }, 1000);
                    }
                    else{
                        audioRetro[1].play();
                        animacionEntrada(retroMala, 'default', 1);

                        setTimeout(() => {
                            animacionSalida(retroMala, 'default', 1);
                        }, 1000);
                    }
                }
            });
        });


        function salidaPreguntas() {  
            animacionSalida(preguntas[indexPregunta], 'default', 1, .5);
            animacionSalida(respuestasV[indexPregunta], 'default', 1, .5);
            animacionSalida(respuestasF[indexPregunta], 'default', 1, .5);
            
            animacionSalida(retroBuena, 'default', 1, .5);

            indexPregunta++;

            if(indexPregunta < preguntas.length){
                respuestas.css('cursor', 'pointer');
                setTimeout(()=>{
                    entradaPreguntas();
                }, 1000);
            }
            else{
                evaluar();
            }
        }

        function evaluar() {
            aplicacion.reproducirAudio(audio[0], finalPagina, 1);
            animacionEntrada(retroFinal, 'default', 1)
        }

        function finalPagina(){
            parpadear(continuar)
        }

        continuar.click(function() {
            if (continuar.css('cursor') == 'pointer') {
                dejarParpadear(continuar);
                aplicacion.siguientePagina();
            }
        });

    </script>
</body>
</html>